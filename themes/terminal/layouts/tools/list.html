{{ define "main" }}
<div class="tools-list">
  <h1 style="margin: 0">Tools Catalog</h1>

  <div class="global-search-box">
    <div style="position: relative;">
      <svg style="position: absolute; left: 8px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; fill: var(--dim-fg); pointer-events: none;" viewBox="0 0 24 24">
        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <input
        type="text"
        id="global-tool-search"
        placeholder="Search tools, topics..."
        autocomplete="off"
        style="border: 0; padding-left: 32px;"
      />
    </div>
  </div>

  <p>{{ len .Pages }} tools available.</p>

  {{ $basherTools := where .Pages ".Params.type" "!=" "go" }} {{ $goTools :=
  where .Pages ".Params.type" "go" }}

  <h2>Basher Tools</h2>
  <p>
    {{ len $basherTools }} tools installable via
    <a href="https://github.com/basherpm/basher">basher</a>
  </p>

  <details class="accordion" style="margin-top: 20px">
    <summary class="accordion-header">Install Basher</summary>
    <div class="accordion-content">
      <pre><code class="language-bash">curl -s https://raw.githubusercontent.com/basherpm/basher/master/install.sh | bash && eval "$(basher init - bash)" # or zsh, fish, sh etc</code></pre>
    </div>
  </details>

  <div class="tool-grid">
    {{ range $basherTools }}
    <div
      class="tool-card"
      data-tool-name="{{ .Title | lower }}"
      data-tool-desc="{{ .Params.description | lower }}"
      data-tool-topics="{{ delimit .Params.topics " " | lower }}"
    >
      <div class="tool-name"><a href="{{ .Permalink }}">{{ .Title }}</a></div>
      <div class="tool-desc">{{ .Params.description }}</div>
      {{ if .Params.topics }}
      <div class="tool-topics">
        {{ range .Params.topics }}
        <span class="topic-tag">{{ . }}</span>
        {{ end }}
      </div>
      {{ end }}
      <div class="tool-meta">
        {{ if .Params.github }}<a href="{{ .Params.github }}">source</a>{{ end
        }} {{ if .Params.install }} |
        <a
          href="#"
          onclick="navigator.clipboard.writeText('{{ .Params.install }}'); alert('Copied to clipboard'); return false;"
          >copy cmd</a
        >{{ end }}
      </div>
    </div>
    {{ end }}
  </div>

  <h2 style="margin-top: 40px">Go Tools</h2>
  <p>{{ len $goTools }} tools installable via go install</p>

  <div class="tool-grid">
    {{ range $goTools }}
    <div
      class="tool-card"
      data-tool-name="{{ .Title | lower }}"
      data-tool-desc="{{ .Params.description | lower }}"
      data-tool-topics="{{ delimit .Params.topics " " | lower }}"
    >
      <div class="tool-name"><a href="{{ .Permalink }}">{{ .Title }}</a></div>
      <div class="tool-desc">{{ .Params.description }}</div>
      {{ if .Params.topics }}
      <div class="tool-topics">
        {{ range .Params.topics }}
        <span class="topic-tag">{{ . }}</span>
        {{ end }}
      </div>
      {{ end }}
      <div class="tool-meta">
        {{ if .Params.github }}<a href="{{ .Params.github }}">source</a>{{ end
        }} {{ if .Params.install }} |
        <a
          href="#"
          onclick="navigator.clipboard.writeText('{{ .Params.install }}'); alert('Copied to clipboard'); return false;"
          >copy cmd</a
        >{{ end }}
      </div>
    </div>
    {{ end }}
  </div>
</div>
{{ end }}
