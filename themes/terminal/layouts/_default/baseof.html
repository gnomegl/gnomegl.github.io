<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ .Site.Params.description }}">
    <link rel="icon" type="image/x-icon" href="{{ "favicon.ico" | relURL }}">
    <link rel="icon" type="image/png" href="{{ "favicon.png" | relURL }}">
    <link rel="stylesheet" href="{{ "css/terminal.css" | relURL }}">
    <script src="{{ "js/copy-code.js" | relURL }}" defer></script>
</head>
<body>
    <div class="tui-container">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="/" {{ if .IsHome }}class="active"{{ end }}>Home</a></li>
                    <li><a href="/tools/" {{ if eq .Section "tools" }}class="active"{{ end }}>Tools</a></li>
                </ul>
                 {{ if or (eq .Section "tools") (and (eq $.Permalink .Permalink) (in $.Permalink "tools")) }}
                 <ul id="tools-list">
                     {{ range where .Site.RegularPages "Section" "tools" }}
                     <li class="tool-item" data-name="{{ .Title | lower }}">
                         <a href="{{ .Permalink }}" {{ if eq $.Permalink .Permalink }}class="active"{{ end }}>└─ {{ .Title }}</a>
                     </li>
                     {{ end }}
                 </ul>
                 {{ end }}
            </nav>
            <div class="sidebar-footer">
                <span id="system-clock">{{ now.Format "15:04:05" }}</span><br>
                {{ .Site.Params.author }}
            </div>
        </aside>

        <main class="main-content">
            <div class="header-bar">
                <button class="sidebar-toggle" onclick="document.querySelector('.sidebar').classList.toggle('active')">☰</button>
                <img src="/groomlake.svg" alt="Groom Lake" class="header-logo">
                <div class="header-title">{{ .Site.Title }}</div>
                <div class="header-info">{{ now.Format "2006-01-02" }}</div>
            </div>
            
            <div class="content-area">
                {{ block "main" . }}{{ end }}
            </div>
            
            <div class="status-bar">
                <span>{{ if .File }}{{ .File.Path }}{{ else }}index{{ end }}</span>
                <span>UTF-8 | LF | {{ .Site.Language.Lang }}</span>
            </div>
        </main>
    </div>
    
    <script>
    document.addEventListener('click', function(e) {
        const sidebar = document.querySelector('.sidebar');
        const toggle = document.querySelector('.sidebar-toggle');
        
        if (sidebar && sidebar.classList.contains('active')) {
            if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
                sidebar.classList.remove('active');
            }
        }
    });
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            const sidebar = document.querySelector('.sidebar');
            if (sidebar && sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
        }
        
        if (e.altKey) {
            switch(e.key) {
                case '1': window.location.href = '/'; break;
                case '2': window.location.href = '/tools/'; break;
            }
        }
    });
    


    const globalSearchInput = document.getElementById('global-tool-search');
    const toolCards = document.querySelectorAll('.tool-card');

    if (globalSearchInput && toolCards.length > 0) {
        globalSearchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();

            toolCards.forEach(card => {
                const toolName = card.dataset.toolName || '';
                const toolDesc = card.dataset.toolDesc || '';

                if (toolName.includes(searchTerm) || toolDesc.includes(searchTerm)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === '/' && document.activeElement !== globalSearchInput) {
                e.preventDefault();
                globalSearchInput.focus();
            }
        });

        globalSearchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                this.value = '';
                this.dispatchEvent(new Event('input'));
                this.blur();
            }
        });
    }

    // Real-time clock
    function updateClock() {
        const clockElement = document.getElementById('system-clock');
        if (clockElement) {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            clockElement.textContent = `${hours}:${minutes}:${seconds}`;
        }
    }

    // Update clock immediately on load
    updateClock();
    
    // Update clock every second
    setInterval(updateClock, 1000);
    </script>
</body>
</html>
