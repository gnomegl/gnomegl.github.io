<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ .Site.Params.description }}">
    <link rel="stylesheet" href="{{ "css/terminal.css" | relURL }}">
</head>
<body>
    <div class="tui-container">
        <button class="sidebar-toggle" onclick="document.querySelector('.sidebar').classList.toggle('active')">☰</button>
        
        <aside class="sidebar">
            <div class="sidebar-header">
                {{ .Site.Title }}
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="/" {{ if .IsHome }}class="active"{{ end }}>Home</a></li>
                    <li><a href="/tools/" {{ if eq .Section "tools" }}class="active"{{ end }}>Tools</a></li>
                </ul>
                {{ if or (eq .Section "tools") (and (eq $.Permalink .Permalink) (in $.Permalink "tools")) }}
                <div class="search-box">
                    <input type="text" id="tool-search" placeholder="Filter tools..." autocomplete="off">
                </div>
                <ul id="tools-list">
                    {{ range where .Site.RegularPages "Section" "tools" }}
                    <li class="tool-item" data-name="{{ .Title | lower }}">
                        <a href="{{ .Permalink }}" {{ if eq $.Permalink .Permalink }}class="active"{{ end }}>└─ {{ .Title }}</a>
                    </li>
                    {{ end }}
                </ul>
                {{ end }}
            </nav>
            <div class="sidebar-footer">
                {{ now.Format "15:04:05" }}<br>
                {{ .Site.Params.author }}
            </div>
        </aside>

        <main class="main-content">
            <div class="header-bar">
                <div class="header-title">{{ .Title }}</div>
                <div class="header-info">{{ .Site.Title }} | {{ now.Format "2006-01-02" }}</div>
            </div>
            
            <div class="content-area">
                {{ block "main" . }}{{ end }}
            </div>
            
            <div class="status-bar">
                <span>{{ if .File }}{{ .File.Path }}{{ else }}index{{ end }}</span>
                <span>UTF-8 | LF | {{ .Site.Language.Lang }}</span>
            </div>
        </main>
    </div>
    
    <script>
    document.addEventListener('keydown', function(e) {
        if (e.altKey) {
            switch(e.key) {
                case '1': window.location.href = '/'; break;
                case '2': window.location.href = '/tools/'; break;
            }
        }
    });
    
    // Tool search functionality
    const searchInput = document.getElementById('tool-search');
    const toolsList = document.getElementById('tools-list');
    
    if (searchInput && toolsList) {
        const toolItems = toolsList.querySelectorAll('.tool-item');
        
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            
            toolItems.forEach(item => {
                const toolName = item.dataset.name;
                if (toolName.includes(searchTerm)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        });
        
        // Focus search box on '/' key
        document.addEventListener('keydown', function(e) {
            if (e.key === '/' && document.activeElement !== searchInput) {
                e.preventDefault();
                searchInput.focus();
            }
        });
        
        // Clear search on Escape
        searchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                this.value = '';
                this.dispatchEvent(new Event('input'));
                this.blur();
            }
        });
    }
    </script>
</body>
</html>